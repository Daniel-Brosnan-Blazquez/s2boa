<script type="text/javascript">

  // Pie chart for processing status
  // Level L0
  {% if processing_events["isp_validity_processing_completeness_l0_channel_1"]|length > 0 %}
  processing_data = [{{ processing_events["isp_validity_processing_completeness_l0_channel_1"]|length - isp_validity_processing_completeness_l0_channel_1_missing|length }}, {{ isp_validity_processing_completeness_l0_channel_1_missing|length }}]
  processing_background_color = ["green", "darkred"]
  processing_labels = ["# processed", "# missing"]

  var data = {datasets: [{data: processing_data,
                          backgroundColor: processing_background_color
                        }],
              labels: processing_labels
  }
  
  vboa.display_pie("processing-pie-processing-status-l0", data)
  {% endif %}
  // Level L1A
  {% if processing_events["isp_validity_processing_completeness_l1a_channel_1"]|length > 0 %}
  processing_data = [{{ processing_events["isp_validity_processing_completeness_l1a_channel_1"]|length - isp_validity_processing_completeness_l1a_channel_1_missing|length }}, {{ isp_validity_processing_completeness_l1a_channel_1_missing|length }}]
  processing_background_color = ["green", "darkred"]
  processing_labels = ["# processed", "# missing"]

  var data = {datasets: [{data: processing_data,
                          backgroundColor: processing_background_color
                        }],
              labels: processing_labels
  }
  
  vboa.display_pie("processing-pie-processing-status-l1a", data)
  {% endif %}
  // Level L1B
  {% if processing_events["isp_validity_processing_completeness_l1b_channel_1"]|length > 0 %}
  processing_data = [{{ processing_events["isp_validity_processing_completeness_l1b_channel_1"]|length - isp_validity_processing_completeness_l1b_channel_1_missing|length }}, {{ isp_validity_processing_completeness_l1b_channel_1_missing|length }}]
  processing_background_color = ["green", "darkred"]
  processing_labels = ["# processed", "# missing"]

  var data = {datasets: [{data: processing_data,
                          backgroundColor: processing_background_color
                        }],
              labels: processing_labels
  }
  
  vboa.display_pie("processing-pie-processing-status-l1b", data)
  {% endif %}
  // Level L1C
  {% if processing_events["isp_validity_processing_completeness_l1c_channel_1"]|length > 0 %}
  processing_data = [{{ processing_events["isp_validity_processing_completeness_l1c_channel_1"]|length - isp_validity_processing_completeness_l1c_channel_1_missing|length }}, {{ isp_validity_processing_completeness_l1c_channel_1_missing|length }}]
  processing_background_color = ["green", "darkred"]
  processing_labels = ["# processed", "# missing"]

  var data = {datasets: [{data: processing_data,
                          backgroundColor: processing_background_color
                        }],
              labels: processing_labels
  }
  
  vboa.display_pie("processing-pie-processing-status-l1c", data)
  {% endif %}
  // Level L2A
  {% if processing_events["isp_validity_processing_completeness_l2a_channel_1"]|length > 0 %}
  processing_data = [{{ processing_events["isp_validity_processing_completeness_l2a_channel_1"]|length - isp_validity_processing_completeness_l2a_channel_1_missing|length }}, {{ isp_validity_processing_completeness_l2a_channel_1_missing|length }}]
  processing_background_color = ["green", "darkred"]
  processing_labels = ["# processed", "# missing"]

  var data = {datasets: [{data: processing_data,
                          backgroundColor: processing_background_color
                        }],
              labels: processing_labels
  }
  
  vboa.display_pie("processing-pie-processing-status-l2a", data)
  {% endif %}
  
  {% if sliding_window %}
  var parameters = {
  "window_delay": "{{ sliding_window['window_delay'] }}",
  "window_size": "{{ sliding_window['window_size'] }}",
  "mission": "{{ sliding_window['mission'] }}"
  }
  var repeat_cycle = {{ sliding_window['repeat_cycle'] }}
  vboa.update_view(parameters, repeat_cycle, "/views/sliding-processing-parameters");
  {% endif %}

</script>